@using TingStore.Client.Areas.Admin.Models.Dashboard
@using TingStore.Client.Areas.Admin.Models.Order
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model DashboardVM

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<div class="row">
    <div class="row">
        <!-- Cột 1 -->
        <div class="col-md-6">
            <div class="card overflow-hidden">
                <div class="card-body">
                    <div class="row">
                        <div class="col-6">
                            <div class="avatar-md bg-soft-primary rounded">
                                <iconify-icon icon="solar:cart-5-bold-duotone" class="avatar-title fs-32 text-primary"></iconify-icon>
                            </div>
                        </div>
                        <div class="col-6 text-end">
                            <p class="text-muted mb-0 text-truncate">Total Orders</p>
                            <h3 class="text-dark mt-1 mb-0">@Model.TotalOrders</h3>
                        </div>
                    </div>
                </div>
                <div class="card-footer py-2 bg-light bg-opacity-50">
                    <div class="d-flex align-items-center justify-content-between">
                        <a href="#!" class="text-reset fw-semibold fs-12">View More</a>
                    </div>
                </div>
            </div>

            <div class="card overflow-hidden mt-3">
                <div class="card-body">
                    <div class="row">
                        <div class="col-6">
                            <div class="avatar-md bg-soft-primary rounded">
                                <i class="bx bx-group avatar-title fs-24 text-primary"></i>
                            </div>
                        </div>
                        <div class="col-6 text-end">
                            <p class="text-muted mb-0 text-truncate">Total Users</p>
                            <h3 class="text-dark mt-1 mb-0">@Model.TotalUsers</h3>
                        </div>
                    </div>
                </div>
                <div class="card-footer py-2 bg-light bg-opacity-50">
                    <div class="d-flex align-items-center justify-content-between">
                        <a asp-area="Admin" asp-controller="Users" asp-action="Index" class="text-reset fw-semibold fs-12">View More</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cột 2 -->
        <div class="col-md-6">
            <div class="card overflow-hidden">
                <div class="card-body">
                    <div class="row">
                        <div class="col-6">
                            <div class="avatar-md bg-soft-primary rounded">
                                <i class="bx bxs-backpack avatar-title fs-24 text-primary"></i>
                            </div>
                        </div>
                        <div class="col-6 text-end">
                            <p class="text-muted mb-0 text-truncate">Deals</p>
                            <h3 class="text-dark mt-1 mb-0"></h3>
                        </div>
                    </div>
                </div>
                <div class="card-footer py-2 bg-light bg-opacity-50">
                    <div class="d-flex align-items-center justify-content-between">
                        <a href="#!" class="text-reset fw-semibold fs-12">View More</a>
                    </div>
                </div>
            </div>

            <div class="card overflow-hidden mt-3">
                <div class="card-body">
                    <div class="row">
                        <div class="col-6">
                            <div class="avatar-md bg-soft-primary rounded">
                                <i class="bx bx-dollar-circle avatar-title text-primary fs-24"></i>
                            </div>
                        </div>
                        <div class="col-6 text-end">
                            <p class="text-muted mb-0 text-truncate">Booked Revenue</p>
                            <h3 class="text-dark mt-1 mb-0"></h3>
                        </div>
                    </div>
                </div>
                <div class="card-footer py-2 bg-light bg-opacity-50">
                    <div class="d-flex align-items-center justify-content-between">
                        <a href="#!" class="text-reset fw-semibold fs-12">View More</a>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- end row -->
</div> <!-- end row -->

<div class="row">
    <div class="col-xl-4 d-none">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h4 class="card-title">Recent Transactions</h4>
                <div>
                    <a href="#!" class="btn btn-sm btn-primary">
                        <i class="bx bx-plus me-1"></i>Add
                    </a>
                </div>
            </div>
            <div class="card-body p-0">
                <div class="px-3" data-simplebar style="max-height: 398px;">
                    <table class="table table-hover mb-0 table-centered">
                        <tbody>
                            <tr>
                                <td>24 April, 2024</td>
                                <td>$120.55</td>
                                <td><span class="badge bg-success">Cr</span></td>
                                <td>Commisions</td>
                            </tr>
                            <tr>
                                <td>24 April, 2024</td>
                                <td>$9.68</td>
                                <td><span class="badge bg-success">Cr</span></td>
                                <td>Affiliates</td>
                            </tr>
                            <tr>
                                <td>20 April, 2024</td>
                                <td>$105.22</td>
                                <td><span class="badge bg-danger">Dr</span></td>
                                <td>Grocery</td>
                            </tr>
                            <tr>
                                <td>18 April, 2024</td>
                                <td>$80.59</td>
                                <td><span class="badge bg-success">Cr</span></td>
                                <td>Refunds</td>
                            </tr>
                            <tr>
                                <td>18 April, 2024</td>
                                <td>$750.95</td>
                                <td><span class="badge bg-danger">Dr</span></td>
                                <td>Bill Payments</td>
                            </tr>
                            <tr>
                                <td>17 April, 2024</td>
                                <td>$455.62</td>
                                <td><span class="badge bg-danger">Dr</span></td>
                                <td>Electricity</td>
                            </tr>
                            <tr>
                                <td>17 April, 2024</td>
                                <td>$102.77</td>
                                <td><span class="badge bg-success">Cr</span></td>
                                <td>Interest</td>
                            </tr>
                            <tr>
                                <td>16 April, 2024</td>
                                <td>$79.49</td>
                                <td><span class="badge bg-success">Cr</span></td>
                                <td>Refunds</td>
                            </tr>
                            <tr>
                                <td>05 April, 2024</td>
                                <td>$980.00</td>
                                <td><span class="badge bg-danger">Dr</span></td>
                                AnglesShopping</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div> <!-- end row -->

<div class="row">
    <div class="col">
        <div class="card">
            <div class="card-body">
                <div class="d-flex align-items-center justify-content-between">
                    <h4 class="card-title">Recent Orders</h4>
                    <a href="#!" class="btn btn-sm btn-soft-primary">
                        <i class="bx bx-plus me-1"></i>Create Order
                    </a>
                </div>
            </div>
            <div class="table-responsive table-centered">
                <table class="table align-middle mb-0 table-hover table-centered">
                    <thead class="bg-light-subtle">
                        <tr>
                            <th>Order ID</th>
                            <th>Created at</th>
                            <th>Customer</th>
                            <th>Priority</th>
                            <th>Total</th>
                            <th>Payment Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model.Orders != null && Model.Orders.Any())
                        {
                            @foreach (var item in Model.Orders)
                            {
                                <tr>
                                    <td>#@item.Id</td>
                                    <td>@item.OrderDate</td>
                                    <td>
                                        <a href="#!" class="link-primary fw-medium">@(item.userResponse?.FullName ?? "Unknown")</a>
                                    </td>
                                    <td>Normal</td>
                                    <td>@string.Format(new System.Globalization.CultureInfo("vi-VN"), "{0:N0}", item.TotalAmount)đ</td>
                                    <td><span class="badge bg-light text-dark px-2 py-1 fs-13">@item.Status</span></td>
                                    <td>
                                        <div class="d-flex gap-2">
                                            <a asp-action="OrderDetail" asp-route-id="@item.Id" class="btn btn-light btn-sm"><iconify-icon icon="solar:eye-broken" class="align-middle fs-18"></iconify-icon></a>
                                            <a href="#!" class="btn btn-soft-primary btn-sm"><iconify-icon icon="solar:pen-2-broken" class="align-middle fs-18"></iconify-icon></a>
                                            <a href="#!" class="btn btn-soft-danger btn-sm"><iconify-icon icon="solar:trash-bin-minimalistic-2-broken" class="align-middle fs-18"></iconify-icon></a>
                                        </div>
                                    </td>
                                </tr>
                            }
                        }
                        else
                        {
                            <tr>
                                <td colspan="7" class="text-center">No item.</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div> <!-- end row -->
